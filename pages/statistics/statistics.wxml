<!--pages/statistics/statistics.wxml-->
<view class="container">
  <!-- é¡µé¢æ ‡é¢˜ -->
  <view class="header">
    <text class="title">æ—¶é—´èµå›ç»Ÿè®¡ä¸­å¿ƒ</text>
    <text class="subtitle">è¿½è¸ªä½ èµå›çš„æ—¶é—´</text>
  </view>

  <!-- æ€»ä½“ç»Ÿè®¡å¡ç‰‡ -->
  <view class="overview-section">
    <view class="overview-card">
      <view class="overview-title">æ€»ä½“æˆå°±</view>
      

      

      

      

      
      <view class="overview-stats">
        <view class="stat-item">
          <view class="stat-value">{{totalRedeemedTimeDisplay}}</view>
          <view class="stat-label">å°æ—¶</view>
          <view class="stat-desc">èµå›æ—¶é—´</view>
        </view>
        <view class="stat-item">
          <view class="stat-value">{{costEfficiency}}</view>
          <view class="stat-label">%</view>
          <view class="stat-desc">èµå›æ€§ä»·æ¯”</view>
        </view>
        <view class="stat-item">
          <view class="stat-value">{{totalDecisions}}</view>
          <view class="stat-label">æ¬¡</view>
          <view class="stat-desc">å†³ç­–æ¬¡æ•°</view>
        </view>
      </view>
    </view>
  </view>

  <!-- å†³ç­–ç»Ÿè®¡ -->
  <view class="decision-stats-section">
    <view class="section-title">å†³ç­–ç»Ÿè®¡</view>
    <view class="decision-stats-card">
      <view class="decision-stat-item">
        <view class="decision-stat-icon">â°</view>
        <view class="decision-stat-content">
          <view class="decision-stat-value">{{hireDecisions}}</view>
          <view class="decision-stat-label">èµå›æ—¶é—´æ¬¡æ•°</view>
        </view>
      </view>
      <view class="decision-stat-item">
        <view class="decision-stat-icon">ğŸ™‹â€â™‚ï¸</view>
        <view class="decision-stat-content">
          <view class="decision-stat-value">{{selfDecisions}}</view>
          <view class="decision-stat-label">è‡ªå·±å®Œæˆ</view>
        </view>
      </view>
      <view class="decision-stat-item">
        <view class="decision-stat-icon">â°</view>
        <view class="decision-stat-content">
          <view class="decision-stat-value">{{totalRedeemedTimeDisplay}}</view>
          <view class="decision-stat-label">èµå›æ—¶é—´(å°æ—¶)</view>
        </view>
      </view>
    </view>
  </view>

  <!-- ä»»åŠ¡ç±»å‹ç»Ÿè®¡ -->
  <view class="task-type-section" wx:if="{{Object.keys(taskTypeStats).length > 0}}">
    <view class="section-title">ä»»åŠ¡ç±»å‹åˆ†æ</view>
    <view class="task-type-list">
      <view class="task-type-item" wx:for="{{Object.keys(taskTypeStats)}}" wx:key="*this">
        <view class="task-type-name">{{item}}</view>
        <view class="task-type-stats">
          <view class="task-type-stat">
            <text class="task-type-stat-label">æ¬¡æ•°ï¼š</text>
            <text class="task-type-stat-value">{{taskTypeStats[item].count}}</text>
          </view>
          <view class="task-type-stat">
            <text class="task-type-stat-label">æ—¶é—´ï¼š</text>
            <text class="task-type-stat-value">{{taskTypeStats[item].redeemedTime.toFixed(1)}}h</text>
          </view>
          <view class="task-type-stat">
            <text class="task-type-stat-label">é‡‘é¢ï¼š</text>
            <text class="task-type-stat-value">Â¥{{taskTypeStats[item].spentMoney.toFixed(0)}}</text>
          </view>
        </view>
      </view>
    </view>
  </view>

  <!-- æœ€è¿‘å†³ç­–è®°å½• -->
  <view class="recent-decisions-section" wx:if="{{recentDecisions.length > 0}}">
    <view class="section-title">æœ€è¿‘å†³ç­–è®°å½•</view>
    <view class="recent-decisions-list">
      <view class="recent-decision-item" wx:for="{{recentDecisions}}" wx:key="id">
        <view class="recent-decision-header">
          <view class="recent-decision-title">{{item.taskDescription || item.taskTypeChinese}}</view>
          <view class="recent-decision-result {{item.choseHire ? 'hire' : 'self'}}">
            {{item.choseHire ? 'âœ… èµå›æ—¶é—´' : 'âŒ è‡ªå·±å®Œæˆ'}}
          </view>
        </view>
        <view class="recent-decision-details">
          <text class="recent-decision-time">{{item.estimatedHours}}å°æ—¶</text>
          <text class="recent-decision-price">Â¥{{item.outsourcePrice}}</text>
          <text class="recent-decision-date">{{formatTime(item.timestamp)}}</text>
        </view>
      </view>
    </view>
    <view class="view-all-history" bindtap="viewDetailHistory">
      æŸ¥çœ‹å…¨éƒ¨å†å²è®°å½• â†’
    </view>
  </view>

</view>