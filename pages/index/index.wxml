<!--index.wxml-->
<view class="container">
    <!-- 欢迎头部 -->
    <view class="welcome-header card-base">
      <view class="welcome-icon">⏰</view>
      <view class="welcome-title">
        <text class="main-title">时间赎回器</text>
        <text class="sub-title">买回你的时间，创造更大价值</text>
      </view>
      <view class="welcome-greeting">
        <text class="greeting-text">你好，{{userInfo.name}}！</text>
        <text class="greeting-desc" wx:if="{{userInfo.hasSetTimeValue}}">
          您的时间价值：¥{{userInfo.timeValue.toFixed(2)}}/小时
        </text>
        <text class="greeting-desc" wx:else>
          还未设置时间价值，快去计算一下吧！
        </text>
      </view>
    </view>

    <!-- 时间赎回成果 -->
    <view class="results-section" wx:if="{{statistics.totalDecisions > 0}}">
      <view class="results-card card-base">
        <view class="results-header">
          <view class="results-icon">📊</view>
          <view class="results-title">时间赎回成果</view>
        </view>
        <view class="results-grid">
          <view class="result-item">
            <view class="result-icon">⏱️</view>
            <view class="result-value">{{statistics.totalSavedTime.toFixed(1)}}</view>
            <view class="result-label">已买回时间(小时)</view>
          </view>
          <view class="result-item">
            <view class="result-icon">💰</view>
            <view class="result-value">¥{{statistics.totalSavedMoney.toFixed(0)}}</view>
            <view class="result-label">节省金额(元)</view>
          </view>
          <view class="result-item">
            <view class="result-icon">📝</view>
            <view class="result-value">{{statistics.totalDecisions}}</view>
            <view class="result-label">决策记录(次)</view>
          </view>
        </view>
      </view>
    </view>

    <!-- 三步赎回你的时间 -->
    <view class="steps-section">
      <view class="steps-card card-base">
        <view class="steps-header">
          <view class="steps-icon">🎯</view>
          <view class="steps-title">三步赎回你的时间</view>
        </view>
        <view class="steps-list">
          <view class="step-item" bindtap="goToCalculator">
            <view class="step-icon">🧮</view>
            <view class="step-content">
              <view class="step-title">计算时间价值</view>
              <view class="step-desc">输入收入，算出每小时值多少钱</view>
            </view>
            <view class="step-status" wx:if="{{userInfo.hasSetTimeValue}}">✓</view>
          </view>
          
          <view class="step-item" bindtap="goToDecision">
            <view class="step-icon">🤖</view>
            <view class="step-content">
              <view class="step-title">智能决策分析</view>
              <view class="step-desc">判断任务是自己做还是雇人做</view>
            </view>
          </view>
          
          <view class="step-item" bindtap="goToStatistics">
            <view class="step-icon">📈</view>
            <view class="step-content">
              <view class="step-title">查看管理成果</view>
              <view class="step-desc">统计节省时间，追踪价值创造</view>
            </view>
          </view>
        </view>
      </view>
    </view>

    <!-- 今日金句 -->
    <view class="today-tip-section">
      <view class="tip-card card-base">
        <view class="tip-icon">💡</view>
        <view class="tip-content">
          <view class="tip-title">{{todayTip.title}}</view>
          <view class="tip-text">{{todayTip.content}}</view>
          <view class="tip-author">—— {{todayTip.author}}</view>
        </view>
      </view>
    </view>

    <!-- 底部操作 -->
    <view class="bottom-actions">
      <button class="action-btn secondary" bindtap="showHelp">
        <text class="btn-icon">❓</text>
        <text class="btn-text">使用帮助</text>
      </button>
      <button class="action-btn" bindtap="refreshData" style="margin-left: 12rpx; background: #ff9500;">
        <text class="btn-icon">🔄</text>
        <text class="btn-text">刷新数据</text>
      </button>
    </view>

    <!-- 版权信息 -->
    <view class="copyright card-base">
      <text class="copyright-text">"金钱仅仅是用来购买时间的工具"</text>
      <text class="copyright-author">—— 《买回你的时间》</text>
    </view>
    </view>
